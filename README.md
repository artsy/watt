# Watt

Watt is a shared js/css/img asset library for Artsy Partner Engineering Ruby apps (tested with Rails and with Middleman for static sites).

# On Bootstrap

Ideally, Watt is a very thin layer on top of [Bootstrap](http://getbootstrap.com/) (3.0.3 at the moment). Bootstrap is primarily useful as a series of good defaults; there are many thousands of pretty smart people thinking about reasonable responsive breakpoints--we shouldn't force ourselves to re-invent triangular wheels. Let's be clear about what we are including (Grid &amp; navbar, for example) and lets clearly not include the bits of the framework we choose to not use in production (jumbotron, buttons, modals, carousels, et c).

Watt's relationship to Bootstrap's Javascript and Stylesheet files should follow the same approach here. [_bootstrap_base.css.scss](https://github.com/dylanfareed/watt/blob/with-bootstrap-and-middleman/vendor/assets/stylesheets/watt/_bootstrap_base.css.scss) is be a good example of removing the components we don't presently need.

We'll additioanlly set global variable overrides in [_bootstrap_variables.css.scss](https://github.com/dylanfareed/watt/blob/with-bootstrap-and-middleman/vendor/assets/stylesheets/watt/_bootstrap_variables.css.scss) and, predictably, [_bootstrap_overrides.css.scss.erb](https://github.com/dylanfareed/watt/blob/with-bootstrap-and-middleman/vendor/assets/stylesheets/watt/_bootstrap_overrides.css.scss.erb).

All of three of these files are imported in [base.css.scss](https://github.com/dylanfareed/watt/blob/with-bootstrap-and-middleman/vendor/assets/stylesheets/watt/base.css.scss).

# On Bourbon

[Bourbon](http://bourbon.io/) is a [Thoughbot](http://thoughtbot.com/) [joint](https://github.com/thoughtbot).
Bourbon is a library of SASS mixins that are authored solely with SASS. Unlike say, Compass, including Bourbon
does not add complexity to asset compilation, or major weight to a project.


# Fonts

## TypeKit (Garamond)

It would be very surprising if you don't find yourself needing, Garamond from [Typekit](http://typekit.com/). Make sure to include it in the head of your layout file. There is a specific Partner Engineering kit on Artsy's Typekit account. It ought to work in most development setups (localhost) and in production on heroku, aws domains and *.artsy.net.

Something like this should the trick (haml):

```
  :javascript
    //<![CDATA[
      (function() {
        var config = {
          kitId: 'lep8qgg',
          scriptTimeout: 3000
        };
        var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
      })();
    //]]>
```

## Fonts.com (Avant Garde)

We can't legally serve Avant Garde from the web and we use a custom version of the font, so
it isn't available from a font hosting service. Our current solution is to serve the custom
font and have fonts.com charge us for their hosted version. We do this by setting up a
JavaScript beacon to count page loads. In order to stay on the right side of the law,
include this with your TypeKit code from above (Note: **Production only** in the haml below):

```
-if Rails.env.production? 
  :javascript
    //<![CDATA[
      var MTIProjectId='f7f47a40-b25b-44ee-9f9c-cfdfc8bb2741';
      (function() {
        var mtiTracking = document.createElement('script');
        mtiTracking.type='text/javascript';
        mtiTracking.async='true';
        mtiTracking.src=('https:'==document.location.protocol?'https:':'http:')+'//fast.fonts.net/t/trackingCode.js';
        (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild( mtiTracking );
      })();
    //]]>
```


## Icon Font

Like artsy.net projects, we host our own font for icons. This gives us vector graphics for sharp scaling
and allows us to use CSS for colors and transitions just like any other typeface. 
See the [Joule](https://github.com/artsy/joule) project for more details.


## Style guide

Watt includes a static style guide, generated by [Middleman](http://middlemanapp.com/). Its accessible on the web at [http://partner-engineering-style-guide.s3-website-us-east-1.amazonaws.com/](http://partner-engineering-style-guide.s3-website-us-east-1.amazonaws.com/).

It is basically split into two sections:

* Interface - the UI in practice; find for example [a sample list of items here](http://partner-engineering-style-guide.s3-website-us-east-1.amazonaws.com/interface/items/)
* Elements - the things broken down into components; find for example [a rundown of button styles here](http://partner-engineering-style-guide.s3-website-us-east-1.amazonaws.com/elements/buttons/)

TODO: More of a walkthrough in terms of how we update the style guide.

```middleman server```

```middleman build```

```AWS_SECRET= AWS_ACCESS_KEY_ID= middleman s3_sync```


## Installation

Watt is a private gem and hosted on Github. To include Watt, add this line to your application's Gemfile, substituting ```USRNME:PSSWRD``` for the proper credentials:

    gem 'artsy-watt', git: 'https://USRNME:PSSWRD@github.com/artsy/watt.git'

And then execute:

    $ bundle

## Usage

TODO: More about usage and how to setup a new project with Watt.

## Authoring Styles

Watt's goal is to maximize re-use of common UI components. To do this, we follow some core tenets. 
See this excellent write up by Phillip Walton on 
[CSS Architecture](http://philipwalton.com/articles/css-architecture/). While we don't expect to 
be too rigid on the naming-schemes presented here, asking ourselves how we measure against the 
following goals when adding CSS to Watt is a great start:

- Predictable
- Reusable
- Maintainable
- Scalable

**Alphabetical ordering of style definition rules.** It's consistent and helps in quickly parsing
what's included in a style.

```scss
.chevron-list-link {
  
}
```

**Namespacing instead of nesting for components.** There is a lengthy class name cost associated with this, but
the benefit balance of maintainance and reuse tips the scales.
May be my favorite CSS metaphor of all time: Grenande vs Sniper Rifle:

```css
/* Grenade */
#main-nav ul li ul { }

/* Sniper Rifle */
.subnav { }

/**
 * Extend components with modifier class names (extend the namespace)
 */
/* Bad */
.widget { }
#sidebar .widget { }

/* Good */
.widget { }
.widget-sidebar { }
```
(From [CSS Architecture](http://philipwalton.com/articles/css-architecture/) by Pillip Walton)


```css
.chevron-list { 
  ...
}
.chevron-list-link { 
  ...
  &::after {
    ...
  }
}
.chevron-list-link-label { 
  ...
}
.chevron-list-link-body { 
  ...
}

/* 
```
Also note that tags are not included (again [CSS Architecture](http://philipwalton.com/articles/css-architecture/) by Pillip Walton) for wins on reuse and maintenance. This scales as the component does not rely on specific parents:


## Contributing

1. Fork it
2. Create your feature branch (`git checkout -b my-new-feature`)
3. Commit your changes (`git commit -am 'Add some feature'`)
4. Push to the branch (`git push origin my-new-feature`)
5. Create new Pull Request
